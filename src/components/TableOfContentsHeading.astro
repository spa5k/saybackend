---
import Link from "./Link.astro";

// https://kld.dev/building-table-of-contents/

const { heading } = Astro.props;
---

<li class="toc-item" data-toc-item={heading.slug}>
  <Link
    href={"#" + heading.slug}
    underline={false}
    class="toc-link"
    data-toc-link={heading.slug}
  >
    {heading.text}
  </Link>
</li>

<style>
  .toc-item {
    position: relative;
    padding-left: 0.75rem;
  }

  .toc-item::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.55rem;
    width: 4px;
    height: 4px;
    background: var(--color-border);
  }

  .toc-item.is-active::before {
    background: var(--color-accent);
    width: 6px;
    height: 6px;
    top: 0.5rem;
  }

  .toc-link {
    display: block;
    font-family: var(--font-mono);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-muted-foreground);
    line-height: 1.35;
    transition:
      color 120ms linear,
      transform 120ms linear;
    text-decoration: none;
  }

  .toc-link:hover {
    color: var(--color-accent);
    transform: translateX(1px);
  }

  .toc-link.is-active {
    color: var(--color-accent);
    font-weight: 700;
  }
</style>
