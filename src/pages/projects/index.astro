---
import ArrowCard from "@components/ArrowCard.astro";
import Container from "@components/Container.astro";
import { PROJECTS } from "@consts";
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects"))
  .filter((project) => !project.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout title={PROJECTS.TITLE} description={PROJECTS.DESCRIPTION}>
  <!-- Structured Data -->
  <script
    type="application/ld+json"
    set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "CollectionPage",
      name: "DevOps Projects & Portfolio",
      description:
        "Open-source projects and production deployments showcasing Go, Node.js, AWS, Kubernetes, PostgreSQL, and Docker implementations",
      url: "https://www.saybackend.com/projects/",
      isPartOf: {
        "@type": "WebSite",
        "@id": "https://www.saybackend.com/#website",
      },
      breadcrumb: {
        "@type": "BreadcrumbList",
        itemListElement: [
          {
            "@type": "ListItem",
            position: 1,
            name: "Home",
            item: "https://www.saybackend.com/",
          },
          {
            "@type": "ListItem",
            position: 2,
            name: "Projects",
            item: "https://www.saybackend.com/projects/",
          },
        ],
      },
    })}
  />
  <Container>
    <aside data-pagefind-ignore>
      <div class="space-y-10">
        <div class="animate text-foreground font-semibold">Projects</div>
        <ul class="animate flex flex-col gap-4">
          {
            projects.map((project) => (
              <li>
                <ArrowCard entry={project} />
              </li>
            ))
          }
        </ul>
      </div>
    </aside>
  </Container>
</Layout>
