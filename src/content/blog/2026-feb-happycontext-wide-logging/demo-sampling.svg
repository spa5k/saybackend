<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="520" fill="none" aria-labelledby="title desc" role="img" viewBox="0 0 1200 520"><title id="title">Sampler Chain</title><desc id="desc">Sampling decision chain from request input to keep/drop output.</desc><defs><linearGradient id="frameStroke" x1="0" x2="1200" y1="0" y2="520" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#F60" stop-opacity=".42"/><stop offset=".5" stop-color="#F60" stop-opacity=".2"/><stop offset="1" stop-color="#F60" stop-opacity=".4"/></linearGradient><linearGradient id="flowStroke" x1="120" x2="1090" y1="260" y2="260" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#F60" stop-opacity=".8"/><stop offset="1" stop-color="#F60" stop-opacity=".6"/></linearGradient><filter id="lineGlow" width="140%" height="140%" x="-20%" y="-20%"><feGaussianBlur result="blur" stdDeviation="2.5"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter><radialGradient id="vignette" cx="0" cy="0" r="1" gradientTransform="translate(600 260) rotate(90) scale(340 680)" gradientUnits="userSpaceOnUse"><stop offset=".72" stop-color="#F2F2F0" stop-opacity="0"/><stop offset="1" stop-color="#F60" stop-opacity=".18"/></radialGradient></defs><rect width="1200" height="520" fill="#F2F2F0"/><rect width="1184" height="504" x="8" y="8" fill="none" stroke="url(#frameStroke)" stroke-width="1.5"/><text x="60" y="76" fill="#F60" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="42" font-weight="700">Sampler Chain</text><text x="60" y="104" fill="#F60" fill-opacity=".82" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="17">Rule evaluation decides whether an event is written.</text><path stroke="url(#flowStroke)" stroke-linecap="round" stroke-width="3" d="M180 290H300" filter="url(#lineGlow)"/><path stroke="url(#flowStroke)" stroke-linecap="round" stroke-width="3" d="M780 290H900" filter="url(#lineGlow)"/><g transform="translate(60 186)"><rect width="120" height="208" fill="#F2F2F0" stroke="#F60" stroke-opacity=".58" stroke-width="1.6" rx="12"/><text x="60" y="60" fill="#F60" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="16" font-weight="700" text-anchor="middle">INPUT</text><text x="60" y="92" fill="#F60" font-family="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="13" text-anchor="middle">request</text><text x="60" y="112" fill="#F60" font-family="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="13" text-anchor="middle">context</text><circle cx="120" cy="104" r="3.5" fill="#F60"/></g><g transform="translate(300 142)"><rect width="480" height="296" fill="#F2F2F0" stroke="#F60" stroke-opacity=".62" stroke-width="1.8" rx="12"/><rect width="480" height="40" fill="#F60" fill-opacity=".1" rx="12"/><text x="18" y="27" fill="#F60" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="16" font-weight="700">CHAIN RULES</text><g fill="#F60" font-family="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="16"><rect width="444" height="58" x="18" y="58" fill="#F60" fill-opacity=".08" stroke="#F60" stroke-opacity=".22" rx="8"/><text x="32" y="93">1. has_error == true -&gt; keep</text><rect width="444" height="58" x="18" y="128" fill="#F60" fill-opacity=".08" stroke="#F60" stroke-opacity=".22" rx="8"/><text x="32" y="163">2. path == &quot;/admin&quot; -&gt; keep</text><rect width="444" height="58" x="18" y="198" fill="#F60" fill-opacity=".08" stroke="#F60" stroke-opacity=".22" rx="8"/><text x="32" y="233">3. rate(5%) -&gt; keep/drop</text></g></g><g transform="translate(900 170)"><rect width="240" height="240" fill="#F60" fill-opacity=".08" stroke="#F60" stroke-opacity=".72" stroke-width="1.8" rx="12"/><rect width="240" height="40" fill="#F60" fill-opacity=".14" rx="12"/><text x="18" y="27" fill="#F60" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="16" font-weight="700">DECISION</text><text x="20" y="92" fill="#F60" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="18" font-weight="600">KEEP</text><text x="20" y="116" fill="#F60" fill-opacity=".8" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="14">write structured event</text><line x1="20" x2="220" y1="146" y2="146" stroke="#F60" stroke-opacity=".35"/><text x="20" y="186" fill="#F60" fill-opacity=".55" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="18">DROP</text><text x="20" y="210" fill="#F60" fill-opacity=".55" font-family="Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif" font-size="14">skip event write</text></g><rect width="1200" height="520" fill="url(#vignette)"/></svg>